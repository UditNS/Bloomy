# 26. Ref, Populate & Thought process of writing APIs 

## Whats your thought process for a POST & GET api ? 
### POST (you put some data to the db)
- An attacker can send some malicious data into our database. If we don't have strict checks onto our db then it can corrupt our db
- Think about corner cases
- Verify each and everything whatever is getting into db

### GET (we are getting information from the db)
- With GET  api we need to make sure that we are only sending the allowed data

- Check for status (it should be accepted or rejected)
- Get the status and requestId from params
- Find the request onto the db
-- _id : requestId,
-- toUserId : logUser._id,
-- status : 'likes'

- If request is present update the status and save the data into the db


## Now writing the api for user requests
- first takes the reciever._id
- then look for all the requests in connection schema
- Use ref & populate to fetch the sender details
- Read more about ref and populate in mongoose docs

## created the user connection api

## created the /feed connection api

## Pagination
- /feed?page=1&limit=10 -> gives first 10 users 1-10 -> skip(0) & limit(10)
- /feed?page=2&limit=10 -> gives first 10 users 11-20 -> skip(10) & limit(10)
- /feed?page=3&limit=10 -> gives first 10 users 21-30 -> skip(20) & limit(10)

.skip() -> how many you want to skip from starting
.limit() -> limit no. of user you want
-> print from 1 to 10 users
const skip = (page - 1) * limit; // formula for skip
